<body class="c49">
<p class="c36 title" id="h.7ki0zqs50cp2">
<span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 144.00px; height: 144.00px;">
<img alt="" src="image2.png" style="width: 144.00px; height: 144.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="">
</span>
</p>

<p class="c36 title" id="h.uqxgz1uspzzq">
<span class="c41 c38">ULEP Ultra Lightweight Embedded Protocol</span>
</p>

<ol class="c14 lst-kix_zcfjg5bmbfyj-0 start" start="1">
<li class="c29"><h1 id="h.npfil513vz5f" style="display:inline">
<span class="c41 c38">Protocol purpose</span></h1></li></ol><p class="c30 c48">


<span class="c1">Protocol was created to provide a transport layer for applications running over limited bandwidth or data transfer cost expensive link, e.g. satellite connection.</span></p>
<ol class="c14 lst-kix_zcfjg5bmbfyj-0" start="2"><li class="c29"><h1 id="h.g4e7qbz9nt4o" style="display:inline">
<span class="c38 c41">System architecture</span></h1></li></ol>

<p class="c48 c30"><span class="c1">System basis on large, but limited number of active clients, which connect to the base server using TCP/IP protocol. Every message has a header which contains message data type and some type specific data.</span>
</p>

<ol class="c14 lst-kix_zcfjg5bmbfyj-0" start="3">
<li class="c29"><h1 id="h.5tcx84k3gh93" style="display:inline"><span class="c41 c38">Workflow</span>
</h1></li></ol><p class="c27 c30">

<span class="c1">Client connects to a known server application using CONNECT message:</span></p><p class="c9">
<span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 250.00px; height: 280.00px;"><img alt="" src="image3.png" style="width: 250.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c9"><span class="c1">Chart 3.1 Connect workflow</span></p><p class="c9 c10"><span class="c1"></span></p><p class="c27 c30"><span class="c1">After successful connection data transmission can begin in both directions:</span></p><p class="c27 c10 c30"><span class="c1"></span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 539.00px; height: 279.00px;"><img alt="" src="image4.png" style="width: 539.00px; height: 279.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c9"><span class="c1">Chart 3.2 Data transmission workflow</span></p><p class="c9 c10"><span class="c1"></span></p><p class="c27 c30"><span class="c1">When a client decides to close the connection, it has to send a disconnect message. After receiving this message, there should be no further data flow:</span></p><p class="c44"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 248.00px; height: 197.00px;"><img alt="" src="image1.png" style="width: 248.00px; height: 197.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c44"><span class="c1">Chart 3.3 Disconnect workflow</span></p><ol class="c14 lst-kix_zcfjg5bmbfyj-0" start="4"><li class="c29"><h1 id="h.s9im23xgmo46" style="display:inline"><span>M</span><span class="c41 c38">essages description</span></h1></li></ol><p class="c27 c30"><span class="c1">To</span></p><p class="c27 c10"><span class="c1"></span></p><p class="c10 c27"><span class="c1"></span></p><ol class="c14 lst-kix_zcfjg5bmbfyj-1 start" start="1"><li class="c33"><h2 id="h.7xvwwneiwmy3" style="display:inline"><span class="c26">Messages types and format</span></h2></li></ol><p class="c8"><span class="c1">All messages starts with header byte which has format shown in table 4.1.1:</span></p><p class="c8 c10"><span class="c1"></span></p><a id="t.5bf1dc4ced439ec33f0cd4dde9f961290e36fea1"></a><a id="t.0"></a><table class="c17"><tbody><tr class="c31"><td class="c45" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c23" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c7"><td class="c45" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c47" colspan="2" rowspan="1"><p class="c4"><span class="c1">Type</span></p></td><td class="c50" colspan="6" rowspan="1"><p class="c4"><span class="c1">Type specific usage</span></p></td></tr></tbody></table><p class="c42"><span class="c1">Table 4.1.1Header byte format</span></p><p class="c42 c10"><span class="c1"></span></p><p class="c11"><span class="c1">All messages have type value present in bits 7 and 6 in byte 1. These types are described in Table 4.1.2.</span></p><p class="c8 c10"><span class="c1"></span></p><a id="t.fa90d8439826c7acc1adb096e809f789f95e5e1b"></a><a id="t.1"></a><table class="c17"><tbody><tr class="c31"><td class="c0" colspan="1" rowspan="1"><p class="c4"><span class="c1">Type</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c4"><span class="c1">Value</span></p></td><td class="c22" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td></tr><tr class="c31"><td class="c0" colspan="1" rowspan="1"><p class="c4"><span class="c1">CONNECT/CONNACK</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c4"><span class="c1">0x00</span></p></td><td class="c22" colspan="1" rowspan="1"><p class="c4"><span class="c1">Message sent while connecting and acknowledging connection</span></p></td></tr><tr class="c31"><td class="c0" colspan="1" rowspan="1"><p class="c4"><span class="c1">TRANSMIT</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c4"><span class="c1">0x40</span></p></td><td class="c22" colspan="1" rowspan="1"><p class="c4"><span class="c1">Message sent from client to server and from server to client</span></p></td></tr><tr class="c31"><td class="c0" colspan="1" rowspan="1"><p class="c4"><span class="c1">TRANSACK</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c4"><span class="c1">0x80</span></p></td><td class="c22" colspan="1" rowspan="1"><p class="c4"><span class="c1">Acknowledge message just after receiving message</span></p></td></tr><tr class="c31"><td class="c0" colspan="1" rowspan="1"><p class="c4"><span class="c1">DISCONNECT</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c4"><span class="c1">0xC0</span></p></td><td class="c22" colspan="1" rowspan="1"><p class="c4"><span class="c1">Message sent while client disconnects</span></p></td></tr></tbody></table><p class="c42"><span class="c1">Table 4.1.2 Message types</span></p><ol class="c14 lst-kix_zcfjg5bmbfyj-1" start="2"><li class="c33"><h2 id="h.fa3mmb1jc5rh" style="display:inline"><span class="c26">Connect/Connack</span></h2></li></ol><p class="c11"><span>Client is the side, which initializes connection. Client sends a fixed length message of connect type and waits for a response from the server with a connack message. Connack has a fixed length of 1 byte. Connect and connack messages are the same type.</span></p><ol class="c14 lst-kix_zcfjg5bmbfyj-2 start" start="1"><li class="c46"><h3 id="h.bek15zpfncs5" style="display:inline"><span class="c21">Connect</span></h3></li></ol><p class="c11"><span class="c1">Connect message is 22 byte long message, which should be sent by client during first communication. It contains 4 information in proper bit configuration described in table 4.2.1.1. Those values are:</span></p><ul class="c14 lst-kix_nwhxze760d6z-0 start"><li class="c27 c43"><span class="c1">Type - 2 bits defining message type</span></li><li class="c27 c43"><span class="c1">Keep alive - 6 bits value of levels of keep alive time (predefined in whole system)</span></li><li class="c27 c43"><span class="c1">Client ID - client individual identifier defined in 4 byte space (unsigned 32 bit integer)</span></li><li class="c27 c43"><span class="c1">Server API key for authorization - value which has to be equal to predefined value stored in server application.</span></li></ul><p class="c27 c10"><span class="c1"></span></p><p class="c27 c10"><span class="c1"></span></p><a id="t.61f806378382bf5e852338a1ff2e4d83a00afc35"></a><a id="t.2"></a><table class="c17"><tbody><tr class="c7"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 1</span></p></td></tr><tr class="c7"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c20" colspan="2" rowspan="1"><p class="c4"><span class="c1">Type (0x40)</span></p></td><td class="c25" colspan="6" rowspan="1"><p class="c4"><span class="c1">Keep alive</span></p></td></tr><tr class="c7"><td class="c16" colspan="1" rowspan="1"><p class="c3"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td></tr><tr class="c7"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 2-6 (default)</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c24" colspan="8" rowspan="1"><p class="c4"><span class="c1">Client ID</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td></tr><tr class="c7"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 7-22 (default)</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c24" colspan="8" rowspan="1"><p class="c4"><span class="c1">API Key</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td></tr></tbody></table><p class="c42"><span class="c1">Table 4.2.1.1</span></p><p class="c8 c10"><span class="c1"></span></p><ol class="c14 lst-kix_zcfjg5bmbfyj-2" start="2"><li class="c46"><h3 id="h.md8lk04dgl7y" style="display:inline"><span class="c21">Connack</span></h3></li></ol><p class="c11"><span class="c1">Connack message is 1 byte long and contains 2 fields:</span></p><ul class="c14 lst-kix_h53mbln3tte5-0 start"><li class="c27 c43"><span class="c1">Type - as in connect message (0x00)</span></li><li class="c27 c43"><span class="c1">Return code - feedback value from server which determine if connection is successful or there is some issue with connection.</span></li></ul><p class="c11"><span class="c1">Format of connack message is described in table 4.2.2.1</span></p><p class="c5"><span class="c1"></span></p><p class="c5"><span class="c1"></span></p><p class="c8 c10"><span class="c1"></span></p><a id="t.6f44bdbb71ce674b23528169d8a8faea631d1a3e"></a><a id="t.3"></a><table class="c17"><tbody><tr class="c7"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 1</span></p></td></tr><tr class="c7"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c20" colspan="2" rowspan="1"><p class="c4"><span class="c1">Type (0x00)</span></p></td><td class="c25" colspan="6" rowspan="1"><p class="c4"><span class="c1">Return code</span></p></td></tr><tr class="c7"><td class="c16" colspan="1" rowspan="1"><p class="c3"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td></tr></tbody></table><p class="c42"><span class="c1">Table 4.2.2.1</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c1">Return codes are described in table 4.2.1.2</span></p><p class="c27 c10"><span class="c1"></span></p><a id="t.4412b4206b81dfc700fff4221098ca9ad8926717"></a><a id="t.4"></a><table class="c17"><tbody><tr class="c31"><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c15">Value</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c15">Name</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c4"><span class="c15">Description</span></p></td></tr><tr class="c31"><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0x00</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c1">OK</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c4"><span class="c1">Connection successful </span></p></td></tr><tr class="c31"><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0x01</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c1">API_KEY</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c4"><span class="c1">Authorization failed - wrong API key</span></p></td></tr><tr class="c31"><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0x02</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c1">ID_PROHIBITED</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c4"><span class="c1">Wrong client ID value - server doesn&rsquo;t allow it to authenticate</span></p></td></tr><tr class="c31"><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0x03</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c1">NOK</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c4"><span class="c1">Unknown (other) issue</span></p></td></tr></tbody></table><p class="c42"><span class="c1">Table 4.2.1.2</span></p><ol class="c14 lst-kix_zcfjg5bmbfyj-1" start="3"><li class="c33"><h2 id="h.sntn0rk6epw7" style="display:inline"><span class="c26">Transmit</span></h2></li></ol><p class="c11"><span class="c1">Transmit message contains 3 bytes header followed by defined data bytes containing message.</span></p><a id="t.69e9c52425aee4be35232f7a2d2de2581b232584"></a><a id="t.5"></a><table class="c17"><tbody><tr class="c35"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 1</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c20" colspan="2" rowspan="1"><p class="c4"><span class="c1">Type (0x40)</span></p></td><td class="c25" colspan="6" rowspan="1"><p class="c4"><span class="c1">Topic identifier</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c3"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td></tr><tr class="c35"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 2</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c24" colspan="8" rowspan="1"><p class="c4"><span class="c1">Message ID</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c3"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td></tr><tr class="c35"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 3</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c24" colspan="8" rowspan="1"><p class="c4"><span class="c1">Message length</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td></tr><tr class="c35"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 4+ (optional)</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c24" colspan="8" rowspan="1"><p class="c4"><span class="c1">User data</span></p></td></tr><tr class="c35"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td></tr></tbody></table><ol class="c14 lst-kix_zcfjg5bmbfyj-1" start="4"><li class="c33"><h2 id="h.bgsh6iv8qjb7" style="display:inline"><span class="c26">Transack</span></h2></li></ol><p class="c11"><span class="c1">Transack message has a fixed length of 2 bytes and its content should be equal to the first 2 bytes of the transmit message which it is acknowledging except of the message type. Message should point to received message by its topic identifier and message ID. Description of message is presented in table 4.4.1.</span></p><p class="c27 c10"><span class="c1"></span></p><a id="t.195bae12208fdec76d2770eb6ac9fc74449231f6"></a><a id="t.6"></a><table class="c17"><tbody><tr class="c7"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 1</span></p></td></tr><tr class="c7"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c20" colspan="2" rowspan="1"><p class="c4"><span class="c1">Type (0x80)</span></p></td><td class="c25" colspan="6" rowspan="1"><p class="c4"><span class="c1">Topic identifier</span></p></td></tr><tr class="c7"><td class="c16" colspan="1" rowspan="1"><p class="c3"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">X</span></p></td></tr><tr class="c7"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 2</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c24" colspan="8" rowspan="1"><p class="c4"><span class="c1">Message ID</span></p></td></tr></tbody></table><p class="c42"><span class="c1">Table 4.4.1</span></p><ol class="c14 lst-kix_zcfjg5bmbfyj-1" start="5"><li class="c33"><h2 id="h.g9szj2m825ii" style="display:inline"><span class="c26">Disconnect</span></h2></li></ol><p class="c11"><span class="c1">Disconnect message is fixed length of 1 byte and can be sent from client and server side. It contains only type value, presented in table 4.5.1. When this message is transmitted or received, both sides should close the connection.</span></p><p class="c27 c10"><span class="c1"></span></p><a id="t.706f1ec54808602cdf0e0cb125214512faabf43f"></a><a id="t.7"></a><table class="c17"><tbody><tr class="c7"><td class="c18" colspan="9" rowspan="1"><p class="c3"><span class="c15">Byte 1</span></p></td></tr><tr class="c7"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Bit number</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">7</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">6</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">5</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">4</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">3</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">2</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr><tr class="c31"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c1">Description</span></p></td><td class="c20" colspan="2" rowspan="1"><p class="c4"><span class="c1">Type (0xC0)</span></p></td><td class="c25" colspan="6" rowspan="1"><p class="c4"><span class="c1">Reserved</span></p></td></tr><tr class="c7"><td class="c16" colspan="1" rowspan="1"><p class="c3"><span class="c1">Values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">1</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c4"><span class="c1">0</span></p></td></tr></tbody></table><p class="c42"><span class="c1">Table 4.5.1</span></p><h2 class="c32" id="h.rx4clgp3mtbh"><span class="c26"></span></h2><ol class="c14 lst-kix_zcfjg5bmbfyj-1" start="6"><li class="c33"><h2 id="h.nv4vr1bo10df" style="display:inline"><span class="c26">Example of communication process</span></h2></li></ol><p class="c8"><span class="c1">Server settings:</span></p><p class="c8"><span class="c1">Api key: 0123456789abcdef</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c15">Connect packet:</span></p><p class="c8"><span class="c12">0x3C </span><span class="c12 c28">0x00 0x00 0x00 0x01</span><span class="c12">&nbsp;</span><span class="c37 c12 c40">0x30 0x31 0x32 0x33 0x34 0x35 0x36 0x37 0x38 0x39 0x61 0x62 0x63 0x64 0x65 0x66</span></p><p class="c8 c10"><span class="c37 c12 c38"></span></p><p class="c8"><span class="c1">Header - 0x00 type combined with 0x3C (60) of keep alive</span></p><p class="c8"><span class="c28">Cliend ID</span><span class="c1">&nbsp;- 0x00000001 - 1</span></p><p class="c8"><span class="c40">Api key</span><span class="c1">&nbsp;- 0123456789abcdef utf-8 encoded*</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c15">Connack packet:</span></p><p class="c8"><span class="c37 c12 c38">0x00</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c1">Header - 0x00 type combined with 0x00 return code (OK)</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c15">Transmit packet (client -&gt; server):</span></p><p class="c8"><span class="c12">0x41 </span><span class="c12 c28">0x00</span><span class="c12">&nbsp;</span><span class="c12 c40">0x04</span><span class="c12">&nbsp;</span><span class="c37 c12 c39">0x74 0x65 0x73 0x74</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c1">Header - 0x40 type combined with 0x01 (1) topic ID</span></p><p class="c8"><span class="c28">Message ID</span><span class="c1">&nbsp;- 0x00 (0) as counter starts from 0</span></p><p class="c8"><span class="c40">Message length</span><span class="c1">&nbsp;- 0x04 (4) bytes long</span></p><p class="c8"><span class="c39">Message data</span><span>&nbsp;- </span><span class="c12">test</span><span class="c1">&nbsp;utf-8 encoded</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c15">Transack packet (server -&gt; client)</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c12">0x81 </span><span class="c12 c28 c37">0x00</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c1">Header - 0x80 combined with 0x01 (1) topic ID</span></p><p class="c8"><span class="c28">Message ID</span><span class="c1">&nbsp;- 0x00 (0) as message ID of received message</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c15">Transmit packet (server -&gt; client):</span></p><p class="c8"><span class="c12">0x41 </span><span class="c12 c28">0x00</span><span class="c12">&nbsp;</span><span class="c12 c40">0x04</span><span class="c12">&nbsp;</span><span class="c37 c12 c39">0x74 0x65 0x73 0x74</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c1">Header - 0x40 type combined with 0x01 (1) topic ID</span></p><p class="c8"><span class="c28">Message ID</span><span class="c1">&nbsp;- 0x00 (0) as counter starts from 0</span></p><p class="c8"><span class="c40">Message length</span><span class="c1">&nbsp;- 0x04 (4) bytes long</span></p><p class="c8"><span class="c39">Message data</span><span>&nbsp;- </span><span class="c12">test</span><span class="c1">&nbsp;utf-8 encoded</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c15">Transack packet (client -&gt; server)</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c12">0x81 </span><span class="c37 c12 c28">0x00</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c1">Header - 0x80 combined with 0x01 (1) topic ID</span></p><p class="c8"><span class="c28">Message ID</span><span class="c1">&nbsp;- 0x00 (0) as message ID of received message</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c15">Disconnect packet (client -&gt; server)</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c37 c12 c38">0xC0</span></p><p class="c8 c10"><span class="c1"></span></p><p class="c8"><span class="c1">Header - 0xC0 as it is fixed message for disconnect</span></p></body>
